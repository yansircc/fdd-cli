# CDD Interview

> 先发散勾勒 picture，再收敛定义约束。

## 触发 Prompt

```
使用 AskUserQuestionTool 访谈我，完善 CDD 规范。
先发散（用户故事、功能描述），再收敛（约束、验证）。
每次 不超过 5 个问题，持续问直到足够清晰。
```

---

## Stage 1: 发散 (Diverge)

> 帮用户勾勒完整 picture，产出 `00-prd.md`

### D1: 用户故事
- 有哪些角色会使用这个功能？
- 每个角色希望达成什么目标？
- 格式：`作为 X，我希望 Y，以便 Z`

### D2: 功能描述
- 核心流程是什么？
- 有哪些主要场景？
- 成功的标志是什么？

### D3: 技术背景（可选）
- 涉及哪些现有模块？
- 有技术选型偏好吗？

**产出**：`00-prd.md`（用户故事 + 功能描述）

---

## 复杂度评估

发散完成后，评估任务复杂度：

| 信号 | 完整版 | 简化版 |
|------|--------|--------|
| 涉及模块数 | ≥3 | 1-2 |
| 用户故事数 | ≥3 | 1-2 |
| 风险级别 | 高（安全/金钱/数据） | 低 |

**简化版**：只写 `01-constraints.md`，跳过验证器和收敛状态。

---

## Stage 2: 收敛 (Converge)

> 从 picture 提取约束边界，产出 `01-constraints.md`

### C1: 失败条件 → BC
- 什么情况算失败？
- 边界情况有哪些？
- 并发/一致性要求？

### C2: 资源限制 → RC
- 响应时间要求？（P50/P99）
- 成本/预算约束？

### C3: 结构约束 → SC
- 放在哪个模块？
- 哪些模块不能依赖？

### C4: 禁止事项 → Non-Goals
- 这个版本不做什么？
- 哪些技术方案排除？

### C5: 不确定项 → UC ⚠️
- 哪些还没想清楚？
- **必须显式声明**：即使无，也要写 `(无)`

### C6: 验证方式（完整版）
- 如何验证约束？
- 哪些可以自动化？

**产出**：
- `01-constraints.md`（必须）
- `02-validators.md`（完整版）
- `03-convergence.md`（完整版）

---

## Stage 3: 预防性 Pitfall

收敛完成后，识别适合预防的约束，询问用户是否添加 FDD Pitfall。

详见：[fdd.md](fdd.md)
